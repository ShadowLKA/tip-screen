<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tip Screen</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for the Inter font */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Ensure the body takes full viewport height and width */
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            overflow: hidden; /* Prevent scrolling */
        }

        /* Base styles for the main container */
        .main-container {
            display: flex;
            flex-direction: column; /* Default to column for portrait */
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 100%;
            padding: 1rem;
            box-sizing: border-box; /* Include padding in element's total width and height */
        }

        /* Media query for landscape orientation on small screens (mobile) */
        @media (orientation: landscape) and (max-width: 767px) {
            .main-container {
                flex-direction: row; /* Arrange main content horizontally in landscape */
                padding: 0.5rem; /* Reduce padding for more space */
            }
            .content-card {
                max-width: 95%; /* Allow card to take more width */
                height: auto; /* Adjust height automatically */
                padding: 1rem; /* Smaller padding for card in landscape */
            }
            .tip-options-grid {
                grid-template-columns: repeat(2, 1fr); /* Adjusted to 2 columns for 4 options in landscape */
                gap: 0.5rem; /* Smaller gap */
            }
            .tip-button {
                padding: 0.75rem; /* Smaller padding for buttons */
                font-size: 0.9rem; /* Slightly smaller font for buttons */
            }
            h1 {
                font-size: 1.75rem; /* Smaller title */
                margin-bottom: 0.5rem;
            }
            p {
                font-size: 1rem; /* Smaller paragraph */
                margin-bottom: 1rem;
            }
            /* Adjustments for card form in landscape */
            .card-form-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
            }
            .card-form-grid .col-span-2 {
                grid-column: span 2 / span 2;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-400 to-blue-600">

    <div class="main-container">
        <div id="content-card" class="bg-white p-6 rounded-2xl shadow-2xl w-full max-w-md mx-auto transform transition-all duration-300 hover:scale-105 content-card">

            <div id="tip-screen-content">
                <h1 class="text-3xl font-bold text-center text-gray-800 mb-4">
                    Tip Amount
                </h1>
                <p class="text-center text-gray-600 mb-6 text-lg">
                    Please select a tip option:
                </p>

                <div id="tip-options-container" class="grid grid-cols-2 gap-3 mb-4 tip-options-grid">
                    </div>

                <button id="no-tip-button" class="w-full p-3 rounded-xl text-lg font-medium mt-3 transition-all duration-200 ease-in-out
                                                    bg-gray-100 text-gray-800 hover:bg-red-100 hover:text-red-700 hover:shadow-md
                                                    focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-75">
                    No Tip
                </button>

                <button id="confirm-button" class="w-full p-3 rounded-xl text-xl font-bold mt-5 shadow-lg
                                                    bg-green-500 text-white hover:bg-green-600 transition-all duration-300 ease-in-out transform hover:scale-105
                                                    focus:outline-none focus:ring-2 focus:ring-green-700 focus:ring-opacity-75">
                    Proceed
                </button>
            </div>
            
            </div>
    </div>

    <script>
        // State variables
        let selectedTip = null;
        let isProcessing = false; // New state to prevent multiple clicks during "Denied"/"Fulfilled" display

        // Define the tip options with simple labels
        const tipOptions = [
            { amount: 0.05, label: '5%' },   // Changed to 5%
            { amount: 0.15, label: '15%' },  // Changed to 15%
            { amount: 0.30, label: '30%' },  // Changed to 30%
            { amount: 0.50, label: '50%' },  // Changed to 50%
        ];

        // Get references to DOM elements
        const tipOptionsContainer = document.getElementById('tip-options-container');
        const noTipButton = document.getElementById('no-tip-button');
        const confirmButton = document.getElementById('confirm-button');

        // Function to render/update tip buttons based on selectedTip
        function renderTipButtons() {
            tipOptionsContainer.innerHTML = ''; // Clear existing buttons
            tipOptions.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option.label;
                button.className = `
                    tip-button p-3 rounded-xl text-lg font-medium transition-all duration-200 ease-in-out
                    ${selectedTip === option.amount
                        ? 'bg-blue-600 text-white shadow-lg transform scale-105 ring-2 ring-blue-300' // Blue highlight
                        : 'bg-gray-100 text-gray-800 hover:bg-blue-100 hover:text-blue-700 hover:shadow-md' // Blue hover
                    }
                    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75
                `;
                button.onclick = () => handleTipSelect(option.amount);
                // Disable tip buttons if processing
                if (isProcessing) {
                    button.disabled = true;
                    button.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    button.disabled = false;
                    button.classList.remove('opacity-50', 'cursor-not-allowed');
                }
                tipOptionsContainer.appendChild(button);
            });

            // Update No Tip button style
            if (selectedTip === 0) {
                noTipButton.classList.add('bg-red-600', 'text-white', 'shadow-lg', 'transform', 'scale-105', 'ring-2', 'ring-red-300');
                noTipButton.classList.remove('bg-gray-100', 'text-gray-800', 'hover:bg-red-100', 'hover:text-red-700', 'hover:shadow-md');
            } else {
                noTipButton.classList.remove('bg-red-600', 'text-white', 'shadow-lg', 'transform', 'scale-105', 'ring-2', 'ring-red-300');
                noTipButton.classList.add('bg-gray-100', 'text-gray-800', 'hover:bg-red-100', 'hover:text-red-700', 'hover:shadow-md');
            }
            // Disable No Tip button if processing
            if (isProcessing) {
                noTipButton.disabled = true;
                noTipButton.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                noTipButton.disabled = false;
                noTipButton.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        // Function to handle tip selection
        function handleTipSelect(amount) {
            if (isProcessing) return; // Prevent selection if processing
            selectedTip = amount;
            updateUI();
        }

        // Function to handle the "No Tip" button click
        function handleNoTip() {
            if (isProcessing) return; // Prevent click if processing
            selectedTip = 0; // Set tip to 0 for "No Tip"
            updateUI();
        }

        // Function to handle the "Proceed" button click
        function handleConfirm() {
            if (isProcessing) return; // Prevent multiple clicks
            isProcessing = true; // Set processing state

            // Store original button state
            const originalText = confirmButton.textContent;
            const originalClasses = Array.from(confirmButton.classList);

            let messageText;
            let messageColorClasses; // Tailwind classes for text and background color

            // Now, only the 50% option (which was 100%) will lead to "Fulfilled" and redirect
            if (selectedTip === 0.50) { // Changed to 0.50 (50%) for the "Fulfilled" path
                messageText = 'Fulfilled. âœ…';
                messageColorClasses = ['bg-green-500', 'hover:bg-green-600', 'focus:ring-green-700'];
            } else {
                messageText = 'Denied ðŸš«';
                messageColorClasses = ['bg-red-600', 'hover:bg-red-700', 'focus:ring-red-800'];
            }

            // Change button to "Denied" or "Fulfilled" state
            confirmButton.textContent = messageText;
            confirmButton.classList.remove('bg-green-500', 'hover:bg-green-600', 'focus:ring-green-700', 'bg-red-600', 'hover:bg-red-700', 'focus:ring-red-800'); // Remove all possible old color classes
            confirmButton.classList.add(...messageColorClasses); // Add new color classes
            confirmButton.disabled = true; // Disable itself

            updateUI(); // Update other buttons to be disabled

            // After a few seconds, revert the button and reset
            setTimeout(() => {
                // If it was the 50% tip, redirect to Instagram
                if (selectedTip === 0.50) { // Changed to 0.50 (50%) for the redirect path
                    // PASTE YOUR INSTAGRAM LINK HERE, replacing 'https://www.instagram.com'
                    window.location.href = 'https://www.instagram.com/luka_kandelaki/'; 
                } else {
                    // For other tips, revert the button and reset UI
                    confirmButton.textContent = originalText;
                    // Restore original classes (remove message colors, add green)
                    confirmButton.classList.remove(...messageColorClasses);
                    confirmButton.classList.add('bg-green-500', 'hover:bg-green-600', 'focus:ring-green-700');
                    confirmButton.disabled = false; // Re-enable itself

                    isProcessing = false; // Reset processing state
                    selectedTip = null; // Reset selection
                    updateUI(); // Re-render to clear selection and re-enable other buttons
                }
            }, 2000); // Display message for 2 seconds before redirecting or reverting
        }

        // Function to update the entire UI based on state
        function updateUI() {
            renderTipButtons(); // Re-render buttons to reflect selection and disable state
        }

        // Attach event listeners
        noTipButton.onclick = handleNoTip;
        confirmButton.onclick = handleConfirm;

        // Initial render when the page loads
        document.addEventListener('DOMContentLoaded', updateUI);
    </script>

</body>
</html>
